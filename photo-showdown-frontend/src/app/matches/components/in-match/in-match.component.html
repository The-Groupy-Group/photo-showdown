<div class="in-match-container">
  <div class="sentence-container">
    <mat-card class="sentence-card">
      <h2>
        Sentence:<strong> {{ this.currentRound?.sentence }}</strong>
      </h2>
    </mat-card>
  </div>

  <!-- Round Info Aside thingy -->
  <div class="round-info-container">
    <!-- Round Details -->
    <mat-card class="round-details">
      <h2>Current Round Details:</h2>
      <p>Round Index: {{ this.currentRound?.roundIndex }}</p>
      <p>
        Round State: <strong>{{ this.currentRound?.roundState }}</strong>
      </p>
      <p>
        Round Time: <strong>{{ this.countdown$ | async }}</strong>
      </p>
      <p *ngIf="currentRound?.roundState === RoundStates.ended">
        <strong
          >Winner: {{ currentRound!.roundWinner?.username ?? "Draw" }}</strong
        >
      </p>
      <button mat-raised-button color="warn" (click)="leaveMatch()">
        Disconnect
      </button>
    </mat-card>

    <!-- Players -->
    <mat-card class="round-players">
      <ul>
        <li *ngFor="let player of this.match?.users">
          <p>
            <strong>{{ player.username }}: </strong>
            Score: {{ score.get(player.id) }}
            <mat-checkbox
              [checked]="lockedInUserIds.has(player.id)"
              color="primary"
              disabled
            ></mat-checkbox>
          </p>
        </li></ul
    ></mat-card>
  </div>

  <!-- Picture Selection or Voting -->
  <div>
    <app-in-match-picture-selection
      *ngIf="
        currentRound?.roundState === RoundStates.pictureSelection &&
        this.currentRound != undefined
      "
      [pictures]="this.usersPictures"
      [currentRound]="this.currentRound"
      (lockedInPicture)="onLockedInPicture()"
    ></app-in-match-picture-selection>

    <app-in-match-vote-picture
      *ngIf="
        (currentRound?.roundState === RoundStates.voting ||
          currentRound?.roundState === RoundStates.ended) &&
        this.currentRound != undefined
      "
      [picturesToVote]="this.currentRound!.picturesSelected"
      [userPictureIds]="this.userPictureIds"
      [currentRound]="this.currentRound"
      (lockedInPicture)="onLockedInPicture()"
    ></app-in-match-vote-picture>
  </div>
</div>
